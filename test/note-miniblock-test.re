= ノートとミニブロック機能のテスト

== 基本的なノート機能

=== タイトルのみのノート

//note[作業メモ]{
* 本番環境のメンテは 22:00 以降
* マイグレーションは read-only 切替後に実施
* 作業完了後は必ずヘルスチェックを実行
//}

=== ラベルとタイトル付きノート

//note[note-migrate][移行の注意]{
マイグレーションの前後で以下を確認してください：

//list[][確認手順]{
rake db:migrate
rake db:rollback
rake app:verify
//}

重要な点として、ロールバックプランも準備しておくこと。
//}

参照例: @<note>{note-migrate} を参照してください。

=== ネストされた要素を含むノート

//note[complex-note][複雑な構造のノート]{
このノートには複数の要素が含まれています：

* 箇条書き項目1
 * ネストされた項目
 * もう一つのネスト項目
* 箇条書き項目2

//list[][サンプルコード][lineno=on]{
def process_data(items):
    result = []
    for item in items:
        result.append(transform(item))
    return result
//}

さらに端末コマンドの例：

//terminal[][実行例]{
$ python process.py
Processing...
Done!
//}
//}

== ミニブロック機能

=== Memo ブロック

//memo[開発メモ]{
この機能は v2.0 で追加されました。
後方互換性を維持しながら実装しています。
//}

//memo{
タイトルなしのメモブロックも可能です。
簡単なメモを残すのに便利です。
//}

=== Tip ブロック

//tip[パフォーマンス向上のヒント]{
キャッシュを有効にすることで、処理速度が約3倍向上します。
設定方法は設定ガイドを参照してください。
//}

=== Info ブロック

//info[システム要件]{
* Node.js 18以上
* Re:VIEW 5.8以上
* 最低2GBのメモリ
//}

=== Warning ブロック

//warning[重要な注意]{
本作業は CI を停止してから行ってください。
データの不整合を防ぐため、必ず手順に従ってください。
//}

=== Important ブロック

//important[緊急対応]{
セキュリティパッチを直ちに適用してください。
CVE-2024-xxxxx の脆弱性が報告されています。
//}

=== Caution ブロック

//caution[操作注意]{
このコマンドは元に戻せません。
実行前に必ずバックアップを取得してください。
//}

=== Notice ブロック

//notice[お知らせ]{
次回のメンテナンスは 2024年3月15日 22:00-24:00 を予定しています。
サービスが一時的に利用できなくなります。
//}

== 複雑な例

=== ミニブロック内のコード

//tip[効率的なコード]{
Pythonのリスト内包表記を使うと処理が高速化されます：

//list[][最適化例]{
# 従来の方法
result = []
for x in range(100):
    if x % 2 == 0:
        result.append(x * 2)

# リスト内包表記
result = [x * 2 for x in range(100) if x % 2 == 0]
//}
//}

=== 複数のミニブロックの連続

//info[前提条件]{
以下の環境が必要です：
* Docker 20.10以上
* docker-compose 2.0以上
//}

//warning[注意事項]{
コンテナの起動順序に注意してください。
データベースが先に起動している必要があります。
//}

//tip[トラブルシューティング]{
接続エラーが発生した場合は、ファイアウォール設定を確認してください。
//}

== 参照とラベルのテスト

//note[ref-test-1][参照可能なノート1]{
このノートは ref-test-1 というラベルで参照できます。
//}

//note[ref-test-2][参照可能なノート2]{
このノートは ref-test-2 というラベルで参照できます。
//}

本文から参照: @<note>{ref-test-1} および @<note>{ref-test-2} を確認してください。

//note[タイトルのみのノート]{
第1引数のみの場合はタイトルとして解釈され、参照はできません。
//}

== まとめ

本章では以下の機能をテストしました：

* //note ブロック（ラベル、タイトル、参照）
* 7種類のミニブロック（memo, tip, info, warning, important, caution, notice）
* ノート内での入れ子要素（リスト、コード、端末）
* 参照マクロ @<note>{label} の動作